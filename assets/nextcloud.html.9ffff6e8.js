import{_ as e,o as p,c as a,a as n}from"./app.dad05bb1.js";const t={},s=n('<h2 id="https-域名过期了处理方式" tabindex="-1"><a class="header-anchor" href="#https-域名过期了处理方式" aria-hidden="true">#</a> https 域名过期了处理方式</h2><ul><li><ul><li><ul><li>nextcloud.enable-https lets-encrypt</li><li>并按照接下来的提示，输入解析到本机ip的域名和你的邮箱，即可完成ssl的申请并将证书安装到nextcloud。</li></ul></li></ul></li></ul><p>直接访问域名</p><p>$ sudo nextcloud.occ config:system:set overwritehost --value=&quot;example.com:81&quot;</p><h2 id="vm下载" tabindex="-1"><a class="header-anchor" href="#vm下载" aria-hidden="true">#</a> vm下载</h2><p>https://www.hanssonit.se/nextcloud-vm/</p><p>错误:Run pre-refresh hook of &quot;nextcloud&quot; snap if present</p><p>首先查看一下正在进行的change</p><p>snap change</p><p>查询最近做的操作</p><p>$ snap changes</p><h2 id="关于snap更多信息-查看man手册" tabindex="-1"><a class="header-anchor" href="#关于snap更多信息-查看man手册" aria-hidden="true">#</a> 关于snap更多信息，查看man手册</h2><p>$ man snap</p><h2 id="snap-版本" tabindex="-1"><a class="header-anchor" href="#snap-版本" aria-hidden="true">#</a> snap 版本</h2><p>版本规定</p><p>stable，稳定版；</p><p>candidate，正式候选版；</p><p>beta，测试版；</p><p>edge，可能不稳定的尝鲜版。</p><p>查看软件版本</p><p><code>sudo snap info nextcloud</code></p><p>切换标准版</p><p><code>sudo snap refresh --channel=latest/stable nextcloud</code></p><p>切换最新测试版</p><p><code>sudo snap refresh --channel=18/edge nextcloud</code></p><p><code>sudo apt-get install snapcraft</code> 安装此应用打开下载速度会快</p><p>https://uappexplorer.com/snaps 软件下载查询</p><p>什么是snap，snap是一种全新的软件包管理方式，它类似一个容器拥有一个应用程序所有的文件和库，各个应用程序之间完全独立。所以使用snap包的好处就是它解决了应用程序之间的依赖问题，使应用程序之间更容易管理。但是由此带来的问题就是它占用更多的磁盘空间</p><p>Snap的安装包扩展名是.snap，类似于一个容器，它包含一个应用程序需要用到的所有文件和库（snap包包含一个私有的root文件系统，里面包含了依赖的软件包）。它们会被安装到单独的目录；各个应用程序之间相互隔离。使用snap有很多好处，首先它解决了软件包的依赖问题；其次，也使应用程序更容易管理。</p><p>现在支持snap的应用并不多，snap软件包一般安装在/snap目录下</p><h2 id="一些常用的命令" tabindex="-1"><a class="header-anchor" href="#一些常用的命令" aria-hidden="true">#</a> <strong>一些常用的命令</strong></h2><p>其实使用snap包很简单，下面我来介绍一下一些常用的命令</p><p>sudo snap list</p><p>列出已经安装的snap包</p><p><code>sudo snap find &lt;text to search&gt;</code></p><p>搜索要安装的snap包</p><p><code>sudo snap install &lt;snap name&gt;</code></p><p>安装一个snap包</p><p><code>sudo snap refresh &lt;snap name&gt;</code></p><p>更新一个snap包，如果你后面不加包的名字的话那就是更新所有的snap包</p><p><code>sudo snap revert &lt;snap name&gt;</code></p><p>把一个包还原到以前安装的版本</p><p><code>sudo snap remove &lt;snap name&gt;</code></p><p>删除一个snap包</p><h2 id="github地址" tabindex="-1"><a class="header-anchor" href="#github地址" aria-hidden="true">#</a> github地址</h2><p>https://github.com/nextcloud/nextcloud-snap</p><h2 id="插件离线安装" tabindex="-1"><a class="header-anchor" href="#插件离线安装" aria-hidden="true">#</a> 插件离线安装</h2><p>本来呢，互联网可以直接在线安装，可我这时企业内部网，没有互联网连接，离线手动安装吧。</p><p>https://apps.nextcloud.com/apps/richdocuments</p><p>这里下载扩展APP。</p><p>解压后放进 /var/www/html/apps</p><p>离线更新snap 路径 /var/snap/nextcloud/22327/nextcloud/extra-apps/onlyoffice$</p><h2 id="补充" tabindex="-1"><a class="header-anchor" href="#补充" aria-hidden="true">#</a> 补充</h2><p>1.数据库位置，使用Snap安装的Nextcloud，数据库文件在以下路径中/var/snap/nextcloud/xxxx(版本数字)/mysql，需要备份直接备份此文件夹即可。</p><p>2.数据位置，NextCloud存储文件夹在/var/snap/nextcloud/common/nextcloud/data，可以通过修改/var/snap/nextcloud/current/nextcloud/config/config.php的datadirectory对应的参数来改变位置，在数据迁移的时候直接复制此文件夹过去。</p><h2 id="在线编辑onlyoffice的坑" tabindex="-1"><a class="header-anchor" href="#在线编辑onlyoffice的坑" aria-hidden="true">#</a> 在线编辑onlyoffice的坑</h2><p>NextCloud使用onlyoffice，Docker安装OnlyOffice Server 后，使用本地服务器异常</p><p>Error when trying to connect (Host violates local access rules)</p><p>参照：https://github.com/ONLYOFFICE/onlyoffice-nextcloud/issues/293</p><p>18以后的NextCloud版本有这个bug， 解决办法在config.php配置文件添加配置</p><p>&#39;allow_local_remote_servers&#39; =&gt; true,</p>',61),o=[s];function d(c,r){return p(),a("div",null,o)}const h=e(t,[["render",d],["__file","nextcloud.html.vue"]]);export{h as default};
